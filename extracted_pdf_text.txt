 1 
 
 
  
基于神经网络的  
硬笔书法人工智能评判数学模型  
 
 
 
 
 
25057 
上海市向明中学  何  飞 高三年级  3101012006320230185  
上海市向明中学  张梓相 高三年级  3101012005320230032  
上海市向明中学  罗嘉婕 高三年级  3101012005320230077  
 
 
 
 
 
  1  
摘要  
本文针对硬笔书法评价中艺术性量化难题，构建了一种融合计算机视觉与深度学习的智能评判数学模型。创
新性地提出双通道评价架构：在规范性评价通道，通过骨架拓扑优化算法实现字形结构解析，建立笔画（长度 -斜
率-曲率复合相似度）、结构（重心补偿空间模型）、章法（面积离散度与间隔均匀性）的三维量化体系；在艺术
性评价通道，首创跨模态分析框架，利用卷积神经网络提取视觉特征，长短期记忆网络建模运笔动态，语言模型
解码文本风格，并构建视觉 -文本联合嵌入空间实现风格强度量化。最终设计弹性权重分配函数，通过艺术性激活
阈值动态调节规范性与艺术性评价权重，实现传统功底与艺术创新的科学平衡。该模型为构建硬笔书法人工智能
评判系统提供了基础数学模型。  
 
 
 
 
 
关键词： 神经网络  硬笔书法  智能判别  艺术性  
 
 
 
 
 
 
 
 
 
 
 
目录  
1. 论文摘要 ……………………………………………………………………………… ..…………………………………………… .1 
2. 给竞赛组委会老师的信 …………………………………………………………………………………………………… .…2 
3. 问题重述 ……………………………………………………………………………………………………………………………… 3 
4. 模型假设 ……………………………………………………………………………………………………………………………… 3 
5. 变量表 ………………… ....…………………………………………………………………………………………………………… 3 
6. 模型建立 …….…………………………………………………………………………………… .……………………………… .…6 
6.1 图像预处理 …….……………… ....………………………………………… .…………………………… ......................6  
6.2单文字分割 …….……………… ....………………………………………… .………………………………… ..................7  
6.3单文字书法字识别 …….……………… ....………………………………………… .……………………………… .........8  
6.4硬笔书法规范性评分模型 …….……………… ....…………………………… .…….……………… .....................9  
6.5硬笔书法艺术性评分模型 …….……………… ....…………………………… .………… .………… .....................14  
6.6硬笔书法综合评价体系 …….……………… ....………………………………………… .…………… .....................16  
7. 模型的应用方法 ……………………………………………………………………………………………………… ..……...….16 
8. 对模型可能出现的结果的应对方案 …………… .…………………………………………………………… ..…….....17  
9. 模型的优缺点 …………………………………………… .…………………… .…………………… ..………………… ..….....…18 
10. 参考文献与附录 ………………………………………………… ..……………… .…………………………………… ..….....…18 
  2  
尊敬的竞赛组委会老师：  
 
您好！  
 
基于给出的命题，本团队提出了一个基于神经网络的硬笔书法人工智能评判系统建模方案。特此写信向您进行
说明。  
 
该模型的核心为借助人工智能神经网络实现艺术性的评判。之所以想到这个方法，是因为我们在试量化书法作
品的艺术风格时，发现其艺术风格太过复杂多维，并且会随具体内容发生变化，难以通过传统的建模方式量化。若
是采用传统方法，不仅会造成模型臃肿，也难以实现艺术性的准确评判。故而我们决定通过人工智能自动提取特征
风格，从而完成概括，达成评分的效果。  
 
我们的系统工作流程大致如下：  
 
首先，对输入的书法作品进行二值化和去噪，然后利用局部最大值法完成骨架提取，接着分割笔画段，并在此
基础上对笔画段重心 Kmeans聚类进行单字分割。  
 
其次，利用传统算法实现对书法作品规范性的评价，充分利用其快捷、成熟并且无需训练的优势。笔画方面，
我们选择了长度、斜率、曲率三个维度，将之与数据库中的字进行比对，得到整体笔画特征评分。结构方面，我们
同样从宽高比、重心位置、笔画位置三个维度来进行衡量，导出整体结构特征评分。章法方面，我们将其量化为文
字大小的相对一致性与文字之间间隔的均匀性，并分别通过判断输入书法字与数据库中书法字的面积之比与间隔之
比的离散程度加以评价，据此形成整体章法特征评分。最终，融合整体笔画、结构、章法特征评分，加权获最终相
似度得分，作为对 书法作品规范性的评价。  
 
如前文所述，最核心的，我们构建了一个基于多种神经网络 （CNN、LSTM、BERT）多维度的分析硬笔书法作品
的模型。该模型仅需输入作品的整体灰度图、单字二值图、以及文本内容，即可探知输入书法作品的艺术风格。在
提取艺术风格后，模型将会对输入作品贴上数量不等的风格标签并赋予强度，最终从视觉 -文本联合呈现、单字间风
格一致性、整体风格鲜明性三个维度打分，保证艺术性评判的多维度与准确性。  
 
我们还对作品进行了简单分类，从而实现规范性与艺术性间的巧妙平衡。对于艺术性低于阈值的书法作品，我
们提高其规范性权重，更加重视其功底；而对于艺术性高于阈值的作品，我们则提高其艺术性权重，允许其为了创
作表达牺牲一部分的规范性。这一设计也是我们的一个亮点。  
 
由于篇幅有限，恕不能将具体数学模型在此一一赘述，烦请您 拨冗查看我们的论文以悉知。期待您的评议！  
 
此致   
敬礼！  
 
上海市向明学校  
何  飞 张梓相  罗嘉婕  
2025年7月28日  3 问题重述  
1.1问题一  
将输入书法字图像转化成可计算可比较数据  
1.2问题二  
对输入书法字图像分割成单个书法字图像  
1.3问题三  
对单个书法字图像的进行书法字识别  
1.4问题四  
对输入书法字图像进行规范性（笔画、结构、章法）评分  
1.5问题五  
对输入书法字图像进行艺术性评分  
1.6问题六  
建立书法字图像综合评分模型  
1.7问题七  
建立硬笔书法人工智能数学模型  
 
模型假设  
1. 输入图像格式为基本 RGB图像格式，前景后景对比清晰，无明显畸变、阴影。  
2. 输入图像单次上限为 1。 
3. 存在标准书法模板数据库 ，并可依此建立艺术风格数据库，可基于书法作品的内容将其作品整图和单字进行风
格分类。  
4. 可使用神经网络（ CNN、LSTM、BERT）提取汉字特征。  
5. 承载设备性能足够优良以支持计算。  
变量表  
 
变量名  意义  
𝑹𝒊,𝒋，𝑮𝒊,𝒋，𝑩𝒊,𝒋 单个像素点的红色、绿色、蓝色强度值  
𝒇(𝒊,𝒋) 仅保留像素点的亮度特征（灰度图）  
𝐁(𝐱,𝐲) 点的像素值（ 0或1） 
𝐈(𝐱,𝐲) 整个输入图像的二值化图  
𝐏(𝐱,𝐲) 点 
𝑵𝟖(𝒙,𝒚) 八邻域， 即周围的八个点  
𝑩(𝒑)𝒏𝒆𝒘 更新像素  
𝜴𝟎 背景像素集  
𝜴𝟏 前景像素集  
𝑫(𝒙,𝒚) 最近的前像素点（ x,y）到背景距离值  
𝑺𝒌(𝒙,𝒚) 骨架点集  
Deg(𝑷) 8邻域前景个数  
𝐖(𝐩) 笔画宽度函数  
𝛝𝐈 笔画边界点集   4 𝑾̅̅̅ 平均笔画宽度  
𝒑start 一个笔画段的起点  
𝒑end 一个笔画段的终点  
str𝒌 一个笔画段，即一条连接两个端点 𝒑start,𝒑end的连续
路径  
𝑪𝒊 第i个聚类中心，对应一个单字  
𝑮𝑪𝒊 单个字𝑪𝒊的重心  
𝐂𝐒(𝐱,𝐲) 单字图像  
𝑪𝑺𝐜 输入单字图像  
𝑪𝑺𝐨 已二值化的数据库中单字图像  
𝒇𝟏 输入图像经神经网络（ ResNet50 ）获得的特征向量  
𝒇𝟐 已二值化的数据库中图像经神经网络（ ResNet50 ）
获得的特征向量  
Dvalue  范数  
𝝈 Sigmoid函数，即 𝛔(𝐱)=𝟏
𝟏+𝒆−𝐱 
h 全连接中间项 1 
s 全连接中间项 2 
ReLU  Max(0,x)  
W 经机械学习自动得出  
b 经机械学习自动得出  
𝑮𝒌 每个笔画段 str𝒌的重心  
∆𝒇 特征差异  
Dvalue  L1 范数  
𝓛 二元交叉熵损失  
𝒔𝒊 训练样本中第  i 次输入的置信度  
𝒚𝒊 训练样本中第  i 个二元标签  
𝑪𝒄𝒂𝒏𝒅 候选集  
𝜷 阈值 1 
𝝀𝟏  重心特征  
𝝀𝟐 轮廓点数  
𝝀𝟑 宽高比  
W 宽度  
H 高度  
𝝁𝟏,𝝁𝟐,𝝁𝟑  宽高比、重心、轮廓点总数三种特征的均值  
𝝈𝟏,𝝈𝟐,𝝈𝟑 宽高比、重心、轮廓点总数三种特征的方差  
𝒂𝟏,𝒂𝟐,𝒂𝟑 宽高比、重心、轮廓点总数三种特征的具体值  
Sort(𝝋,𝝓𝒊) 相似度排序  
𝒙𝒊,𝒌 𝑪𝑺𝒐的第 k个特征数  
𝐇(𝛉) 方向直方图 (遍历各方向前景数）  
𝐮(𝛉) (𝐜𝐨𝐬𝛉,𝐬𝐢𝐧𝛉） 
𝐑𝐜𝐚𝐧𝐝  候选交叉区域（哪个点的笔画延伸方向大于 2，即
交叉部位）  
𝛄 阈值 2 
𝑹𝒊~𝑹𝒋 原先的区域  
𝐑𝐧𝐞𝐰 合并产生的新区域   5 𝐒𝐤𝐟𝐢𝐧𝐚𝐥  最终骨架  
𝒔𝒆𝒈𝒌 新笔画段（最终骨架中一条连接两个端点 𝑷start,𝒑end
的连续路径）  
𝐒𝐄𝐆  笔画段集合  
𝐓𝐢 子笔画段  
𝑪𝒅𝒊𝒓 皮尔逊相关系数  
𝑪𝒘𝒊𝒅𝒕𝒉  宽度差异  
𝑪𝒊𝒋 组合系数  
𝝉(𝒌) 阈值 3（初始  𝝉(𝟎) = 1.0） 
k 迭代计数器  
c 无连接计数器  
𝑪𝒊 候选集  
𝒔𝒕𝒓𝒐𝒌𝒆 𝒎 单笔画点集  
𝑩𝒍(𝒕) B样条链接函数  
𝐒𝐓𝐑𝐎𝐊𝐄  单笔画集  
𝐈𝐒(𝐱,𝐲) 单笔画图像， 𝐈𝐒(𝐱,𝐲)∈ℝ𝑾×𝑯 
𝑰𝑺𝒐,𝒊 输入字第 i个笔画  
𝑰𝑺𝒄,𝒊 数据库中字对应笔画  
𝑺𝒊 单笔画相似度  
𝑺𝒊𝒍 笔画长度相似度  
𝑳𝒐,𝒊 输入书法字第 i个笔画骨架的像素数  
𝑳𝒄,𝒊 数据库中书法字第 i个笔画骨架的像素数  
𝜽𝒌 方向角  
𝑺𝒊𝒌 笔画斜率相似度  
𝑺𝒊 单笔画综合相似度  
𝑺𝒔𝒕𝒓𝒐𝒌𝒆  整体笔画特征评分  
𝛚𝒊 第i个笔画的权重（按该笔画像素数占总骨架像素
数的比例计算）  
𝑺𝒔𝒕𝒓𝒖𝒄𝒕  结构特征评分  
𝑺𝒓 宽高比相似度  
𝑹𝒐 数据库中书法字的宽高比  
𝑹𝒄 输入书法字的宽高比  
𝑺𝒉 重心位置相似度  
（𝒙𝒐,𝒚𝒐） 数据库中书法字的重心  
（𝒙𝒄,𝒚𝒄） 输入书法字的重心  
𝒇𝒐(𝒙,𝒚) 数据库中书法字的二值图像，前景像素为 1，背景
为0 
𝒇𝒄(𝒙,𝒚) 输入书法字的二值图像，前景像素为 1，背景为 0 
𝑺𝒑 笔画位置相似度  
(𝒙𝒐,𝒊,𝒚𝒐,𝒊) 数据库中书法字第 i个笔画的重心  
(𝒙𝒄,𝒊,𝒚𝒄,𝒊) 输入书法字第 i个笔画的重心  
𝑳𝒊 数据库中书法字第 i个笔画的长度（像素数）  
𝑺𝒑𝒂𝒔𝒔𝒂𝒈𝒆  章法特征相似度  
𝑴𝑱(𝑪𝑺) 作品字实际面积  
𝑴𝑱(𝑪𝑺𝒐) 模版字实际面积  
𝑪𝑺𝒄 输入单字   6 𝑪𝑺𝒐 与输入单字相匹配单字  
𝒖𝒊 输入单字与模板字的面积比  
U 面积相似离散程度（方差）  
R 书法作品中书法字总个数  
𝑱𝑮𝒊 文字间隔，即两相邻文字之间骨架上的点在水平方
向上的最小距离  
𝑱𝑮𝑱 间隔方差  
𝑺𝒕𝒐𝒕𝒂𝒍  最终相似度得分  
D 艺术性评分模型输入空间  
𝐯𝐟𝐨𝐧𝐭 字体特征  
 𝑭𝜽 字体特征提取神经网络  
𝒗𝒆𝒎𝒐𝒕𝒊𝒐𝒏  情感特征  
𝑳𝑺𝑻𝑴  长短期记忆网络  
𝒗𝒍𝒊𝒕𝒆𝒓𝒂𝒓𝒚  文风特征  
𝒔𝒐𝒇𝒕𝒎𝒂𝒙  𝐬𝐨𝐟𝐭𝐦𝐚𝐱 =𝒆𝐳𝐢
∑𝐞𝐳𝐣𝐊
𝐣=𝟏 
𝒗𝒔𝒕𝒚𝒍𝒆  风格特征向量  
𝐭 风格标签  
𝐋𝐚𝐲𝐞𝐫𝐍𝐨𝐫𝐦  层归一化  
𝐀𝐥 视觉 -文本联合空间投影  
𝒗𝒗𝒊𝒔𝒖𝒂𝒍  视觉风格向量  
𝒗𝒕𝒆𝒙𝒕 文本风格向量  
𝐀 艺术性综合评分  
𝐂𝐨𝐡𝐞𝐫𝐞𝐧𝐜𝐞  单字间风格一致性  
𝐃𝐢𝐬𝐭𝐢𝐧𝐜𝐭𝐧𝐞𝐬𝐬  整体风格鲜明度  
𝓛′ 艺术性评分模型 损失函数  
𝐒𝐜𝐨𝐫𝐞  综合评价评分  
 
模型建立  
6.1图像预处理  
6.1.1图像二值化  
因为无法对图像直接进行计算和比较，故对图像进行二值化处理。  
使用经典加权 RGB-灰度转换，保留亮度特征  
     𝒇(𝒊,𝒋)=𝟎.𝟐𝟗𝟗∗𝑹𝒊,𝒋+𝟎.𝟓𝟖𝟕∗𝑮𝒊,𝒋+𝟎.𝟏𝟏𝟒∗𝑩𝒊,𝒋 
重新赋值所有像素，令其二值化  
即𝐁(𝐱,𝐲)={𝟎  𝐢𝐟 𝐟(𝐱,𝐲)≤𝟏𝟐𝟖
𝟏  𝐢𝐟 𝐟(𝐱,𝐲)>𝟏𝟐𝟖 
最终得到二值图像  𝐈(𝐱,𝐲)∈{𝟏,𝟎} 
6.1.2 去噪  
简单去噪方法包括均值滤波与中值滤波，本文为保留锐度选择中值滤波  
对于点P(x,y)∈I(x,y) 
八邻域定义为 𝑁8(𝑥,𝑦)={(𝑖′,𝑗′)∣|𝑖′−𝑥|≤1,|𝑗′−𝑦|≤1,(𝑖′,𝑗′)≠(𝑥,𝑦)} 
更新像素： 𝐵(𝑝)𝑛𝑒𝑤=𝑚𝑒𝑑𝑖𝑎𝑛(𝐵(𝑁8))  7  
6.2 单文字分割  
6.2.1 文字骨架提取  
本文基于局部最大值法提取文字骨架。  
6.2.1. 1距离变换  
定义背景像素集 𝛺0={(𝑖,𝑗)∣𝐵(𝑖,𝑗)=0} 
定义前景像素集𝛺1={(𝑖,𝑗)∣𝐵(𝑖,𝑗)=1} 
对于任意前像素点 (𝑥,𝑦)∈𝛺1，定义其距离值： 𝐷(𝑥,𝑦)=𝑚𝑖𝑛
(𝑖,𝑗)∈𝛺0√(𝑥−𝑖)2+(𝑦−𝑗)2 
得到距离图  𝐷(𝑥,𝑦)∈ℝ+，每个值表示该点到背景最近的距离。  
6.2.1.2骨架点提取（局部最大值法 ） 
骨架点𝑆𝑘(𝑥,𝑦)的像素赋值 条件为：  
           𝑩(𝑺𝒌)={𝟏if 𝑫(𝒙,𝒚)≥𝑫(𝒊,𝒋),∀(𝒊,𝒋)∈𝑵𝟖(𝒙,𝒚)
𝟎 otherwise 
6.2.1. 3端点保留规则（确保连通）  
对于骨架图像 Sk(x,y)，计算其 8邻域前景个数  
          Deg(𝑷)=∑
𝒌=𝟏𝟖
𝑩(𝑵𝟖(𝑷)) 
若满足一下两条：  
   1）Deg(𝑷)=𝟏（为端点）  
   2）𝑷∈𝑺𝒌(𝒙,𝒚) 
则强制保留该点： 𝑺𝒌′(𝑷)=𝟏 
6.2.1.4骨架优化  
骨架点分类  
点类型判定：  
  𝚻(𝐩)={𝐞𝐧𝐝𝐩𝐨𝐢𝐧𝐭        𝐃𝐞𝐠(𝐩)=𝟏
𝐧𝐨𝐝𝐞               𝐃𝐞𝐠(𝐩)=𝟐
𝐚𝐦𝐛𝐢𝐠𝐮𝐨𝐮𝐬    𝐃𝐞𝐠(𝐩)≥𝟑 
毛刺去除  
笔画宽度函数（ BBOD算法） : 
𝐖(𝐩)=𝐦𝐢𝐧
𝐪∈𝛝𝐈‖𝐩−𝐪‖𝟐 
 ϑI：笔画边界点集 ,即ϑI={P|D(P)=1} 
平均笔画宽度：  
  𝑾̅̅̅=𝟏
|𝑺𝒌|∑𝑾(𝒑) 𝒑∈𝑺𝒌  
毛刺删除条件（ α > 0 为阈值）：  
  𝐃𝐞𝐥𝐞𝐜𝐭(𝐏𝐞𝐧𝐝𝐩𝐨𝐢𝐧𝐭)⇔ ∃𝐩∈𝚨,‖𝐩−𝐏𝐞𝐧𝐝𝐩𝐨𝐢𝐧𝐭‖𝟐<𝛂𝐖̅ 
  其中：A={P|T(p)=ambiguous } 
  更新骨架： Sk=Sk∖{Pendpoint},   if Delect(Pendpoint)  
 
6.2.2 单文字分割  
6.2.2. 1骨架提取后笔画段定义  
骨架点集表示为：  
           𝑺𝒌={𝒑𝒊=(𝒙𝒊,𝒚𝒊)∣𝒊=𝟏,𝟐,…,𝑵} 
笔画段定义：  
一个笔画段 str𝑘∈𝑆𝑘是一条连接两个端点 𝑃start,𝑝end的连续路径：  
          str𝒌={𝒑𝟏,𝒑𝟐,…,𝒑𝒏},𝒑𝟏=𝒑start,𝒑𝒏=𝒑end  8 端点满足：  
         Deg(𝑝start)=Deg(𝑝end)=1 
其中Deg(𝑝)连接的骨架点个数  
 
6.2.2.2聚类  
每个笔画段 str𝑘有重心：  
       𝑮𝒌=(𝟏
|str𝑘|∑
𝒊=𝟏|str𝑘|
𝒙𝒊,𝟏
|str𝑘|∑
𝒊=𝟏|str𝑘|
𝒚𝒊),(𝒙𝒊,𝒚𝒊)∈str𝑘 
将所有笔画段的重心集合作为输入，做 KMeans聚类：  
       {𝐺𝑘}𝑘=1𝑀→KMeans(𝐾)
{𝐶1,𝐶2,…,𝐶𝐾} 
其中： M：笔画段数量； 𝐶𝑖第i个聚类中心，对应一个单字  
6.2.2.3图像归一化  
消除输入图像单书法字与数据库中单书法字二值图因尺寸差异导致的量纲不一致问题。  
将输入图像单书法字二值图缩放到与数据库中单书法字二值图相同分辨率（设为 𝑊×𝐻像素），确保后续特
征计算的基准统一。  
即对于单个字 𝐶𝑖： 
  令其重心为 𝑮𝑪𝒊=(𝟏
|𝐶i|∑
𝒊=𝟏|𝐶i|
𝒙𝒊,𝟏
|𝐶i|∑
𝒊=𝟏|𝐶i|
𝒚𝒊),(𝒙𝒊,𝒚𝒊)∈𝐶i 
      创建 N个单字图像 CS(x,y)∈ℝ𝑊×𝐻 ,B(CS)=0 
以重心𝑮𝑪𝒊为CS(x,y)的中心(W
2,H
2), 将点P∈Ci平移至 CS(x,y)上 
 
6.3 单文字书法字识别  
本文单书法字识别使用 CIRM框架，基于孪生神经网络 ResNet50 进行第一层筛选（ CIR-SNN），并以三个特征
数进行二次比较 (CI-FRA)，以使输入的书法字能与数据库中的书法字能精确匹配。  
6.3.1 特征提取  
6.3.1.1 共享权重双分支：  
   输入图像 𝐶𝑆c, 数据库中图像 𝐶𝑆o（已二值化）  
   经神经网络（ ResNet50 ）获得特征向量 f1, f2  
   即：𝑓1=𝑅𝑒𝑠𝑁𝑒𝑡50(𝐶𝑆𝑐) 
       𝑓2=𝑅𝑒𝑠𝑁𝑒𝑡50(𝐶𝑆𝑜) 
6.3.1.2 特征差异计算：  
   定义特征差异为 ∆𝑓=|𝑓𝑖−𝑓𝑗| 
 
6.3.2 相似度度量（ CIR-SNN） 
6.3.2.1 L1 范数计算：  
  Dvalue=∑(𝚫𝒇𝒊)𝐧
𝒊=𝟏  
6.3.2.2全连接层处理：  
  𝐡=𝐑𝐞𝐋𝐔(𝐖𝟏𝐃𝐯𝐚𝐥𝐮𝐞+𝐛𝟏)   
  𝐬=𝛔(𝐰𝟐𝐡+𝐛𝟐） 
  其中  ReLU=max(0,x)    
其中  𝜎 为 Sigmoid函数，即 σ(x)=1
1+𝑒−x   W与b经机械学习自动得出  
6.3.2. 3 损失函数  
二元交叉熵损失：  
𝓛=−𝟏
𝑵∑
𝒊=𝟏𝑵
[𝒚𝒊𝒍𝒐𝒈(𝒔𝒊)+(𝟏−𝒚𝒊)𝒍𝒐𝒈(𝟏−𝒔𝒊)] 
此为机械学习目标   9 其中：𝒔𝒊是训练样本中第  i 次输入的置信度，  
𝒚𝒊是训练样本中第  i 个二元标签。在二元标签中， 1 表示𝐶1和 𝐶2为同一类书法字图像， 0 表示相反。  
故得到候选集 𝐶𝑐𝑎𝑛𝑑={𝐶𝑆|𝑆(𝐶𝑆)<𝛽}  其中𝛽>0为阈值  
 
6.3.3 特征排序算法  (CI-FRA)  
6.3.3.1  特征定义  
6.3.3.1.1 重心特征：  
    𝝀𝟏=(∑𝒊∙𝒇(𝒊,𝒋)
∑𝒇(𝒊,𝒋),∑𝒋∙𝒇(𝒊,𝒋)
∑𝒇(𝒊,𝒋)) 
其中， i 为 P 横向像素点的个数，  
j 为 P 纵向像素点的个数，  
f（i,j）表示图像在 (i,j) 点上的灰度值。  
6.3.3.1.2 轮廓点数：  
𝜆2=|ϑI| 
其中ϑI为笔画边界点集  
6.3.3.1.3 宽高比：  
𝝀𝟑=𝑾
𝑯 
其中， W为P的宽度，即 W=max(|xi−xj|) 
H为高度 ,即H=max(|yi−yj|)  
  (xi,yi),(xj,yj)∈Sk(x,y) 
6.3.3.2  归一化处理  
𝝋𝒌=𝒂𝒌−𝝁𝒌
𝝈𝒌，𝒌=𝟏,𝟐,𝟑 
其中𝜇1,𝜇2,𝜇3分别对应宽高比、重心、轮廓点总数三种特征的均值  
𝜎1,𝜎2,𝜎3对应上述三种特征的方差  
𝑎1,𝑎2,𝑎3为其对应三种特征的具体值  
6.3.3.3  相似度排序  
Sort(𝝋,𝑪𝑺𝒐)=∑
𝒌=𝟏𝟑
|𝝋𝒌−𝒙𝒊,𝒌|， 
其中𝒙𝒊,𝒌=(𝐂𝐒𝒐,𝒌−𝝁𝒌)
𝝈𝒌,𝑪𝑺𝒐𝝐𝑪𝒄𝒂𝒏𝒅,𝑪𝑺𝒐,𝒌表示𝑪𝑺𝒐的第 k个特征数  
故𝐶𝑆𝑐与𝐶𝑆𝑜=𝑎𝑟𝑔 𝑚𝑖𝑛(𝑺𝒐𝒓𝒕(𝝋,𝝓𝒊)进行匹配  
 
6.4 硬笔书法规范性评分模型  
对于硬笔书法来说，写的好不好很大程度上和临摹的技巧有关。本文基于多维度的相似度来度量硬笔书法作品
的规范性。  
6.4.1 笔画分割  
本文利用了基于交叉点分割再重组的方法，通过把笔画分离来更好评判笔画的规范性。  
6.4.1.1 分离笔画段  
对于优化后的骨架图像 Sk(x,y)，从交叉点把它分割为若干个笔画段  
6.4.1.1.1 PBOD 算法  
方向直方图 (遍历各方向前景数）：  
  𝐇(𝛉)=∑𝐁(𝐩+𝐝∙𝐮(𝛉))𝟑𝐰(𝐩)
𝐝=𝟏,𝛉∈[𝟎,𝟐𝛑) 
 其中u(θ)=(cosθ,sinθ），p∈Sk 
候选交叉区域（哪个点的笔画延伸方向大于 2，即交叉部位）：  
  𝐑𝐜𝐚𝐧𝐝={𝐩|𝐩𝐞𝐚𝐤(𝐇(𝛉))≥𝟐} 
6.4.1.1.2 区域合并   10 合并条件 (γ>0为阈值）：  
  𝑹𝒊~𝑹𝒋⟺𝐦𝐢𝐧
𝒑∈𝑹𝒊,𝒒∈𝑹𝒋‖𝒑−𝒒‖𝟐≤𝜸 
合并操作：  
  𝐑𝐧𝐞𝐰=𝐑𝐢∪𝐑𝐣 
6.4.1.1.3 畸变点删除  
最终骨架：  
  𝐒𝐤𝐟𝐢𝐧𝐚𝐥=𝐒𝐤∖(⋃𝐑𝐤𝐊
𝐤=𝟏) 
对于𝐒𝐤𝐟𝐢𝐧𝐚𝐥： 
笔画段𝑠𝑒𝑔𝑘∈𝐒𝐤𝐟𝐢𝐧𝐚𝐥是一条连接两个端点 𝑃start,𝑝end的连续路径：  
          𝐬𝐞𝐠𝒌={𝒑𝟏,𝒑𝟐,…,𝒑𝒏},𝒑𝟏=𝒑start,𝒑𝒏=𝒑end 
端点满足：  
         Deg(𝑝start)=Deg(𝑝end)=1 
其中Deg(𝑝)连接的骨架点个数  
笔画段集合：  
  𝐒𝐄𝐆={𝐬𝐞𝐠𝟏,...,𝐬𝐞𝐠𝐌} 
6.4.1.2笔画段重组系数  
基于多种指标，将笔画段按最可能的方式重组，本章列出了如何计算笔画段为同一笔画的可能性。  
6.4.1.2.1 方向一致性  
子笔画段：  
   令 𝐓𝐢={𝐩𝟏,...,𝐩𝐋}⊆𝐬𝐞𝐠𝐢 
皮尔逊相关系数：  
  𝑪𝒅𝒊𝒓=∑(𝒙𝒌−𝒙̅)(𝒚𝒌−𝒚̅)𝟐𝑳
𝒌=𝟏
√∑(𝒙𝒌−𝒙̅)𝟐 𝟐𝑳
𝒌=𝟏√∑(𝒚𝒌−𝒚̅)𝟐 𝟐𝑳
𝒌=𝟏 
 其中(xk,yk)∈Ti∪Tj 
6.4.1.2.2 宽度一致性  
宽度差异：  
   𝐶𝑤𝑖𝑑𝑡ℎ=|1
|𝑇𝑖|∑𝑤(𝑝) 𝑝∈𝑇𝑖−1
|𝑇𝑗|∑𝑤(𝑝) 𝑝∈𝑇𝑗| 
 
6.4.1.2.3 组合系数  
𝑪𝒊𝒋=𝝀𝑪𝒅𝒊𝒓−𝝁𝑪𝒘𝒊𝒅𝒕𝒉,𝝀,𝝁>𝟎 
6.4.1.3 笔画提取算法  
6.4.1.3.1 动态阈值迭代（匹配）  
状态变量：  
    阈值𝜏(𝑘)（初始  𝜏(0) = 1.0 ） 
迭代计数器  k = 0  
    无连接计数器  c = 0  
候选集定义 : 
  𝑪𝒊={𝒔𝒆𝒈𝟏| 𝐦𝐢𝐧
𝒑∈𝒆𝒏𝒅(𝒔𝒆𝒈𝒊),𝒒∈𝒆𝒏𝒅(𝒔𝒆𝒈𝒋)‖𝒑−𝒒‖𝟐≤𝜹} 
迭代规则：  
  {连接(𝐬𝐞𝐠𝐢,𝐬𝐞𝐠𝐣)                  𝐢𝐟 𝐦𝐚𝐱𝐣𝐂𝐢𝐣≥𝛕(𝐤)
𝛕(𝐤+𝟏)=𝛕(𝐤)−𝟎.𝟏            𝐢𝐟 𝐜≥𝟑
𝐤←𝐤+𝟏                             𝐨𝐭𝐡𝐞𝐫𝐰𝐢𝐬𝐞  
终止条件：  
  (𝝉(𝒌)≤𝟎.𝟔)∨(𝒌≥𝟏𝟎𝟎) 
6.4.1.3.2. 笔画重建（连接）  
B样条连接：   11   𝒔𝒕𝒓𝒐𝒌𝒆 𝒎=⋃𝑩𝒍(𝒕)𝑵𝒎
𝒍=𝟏,𝒕∈[𝟎,𝟏] 
  其中𝐵𝑙(𝑡)=∑𝑁𝑖,𝑘(𝑡)𝑃𝑖(𝑙) 𝑛
𝑖=0  
输出集合：  
  𝐒𝐓𝐑𝐎𝐊𝐄 ={𝐬𝐭𝐫𝐨𝐤𝐞 𝟏,...,𝐬𝐭𝐫𝐨𝐤𝐞 𝐌} 
6.4.1.3.3 输出单笔画图层  
创建 P个单笔画图像 IS(x,y)∈ℝ𝑊×𝐻 ,B(IS)=0 
对于𝐼𝑆𝑖, 令B(P)=1, P∈𝑠𝑡𝑟𝑜𝑘𝑒 𝑖 
 
6.4.2 单笔画相似度计算  
本文希望从输入书法字与数据库中书法字的相似度来评判书法字笔画的规范性  
设数据库中的书法字第 i个笔画为 𝐼𝑆𝑜,𝑖 ，输入书法字对应笔画为 𝑆𝑐,𝑖，通过 3个维度计算相似度 𝑆𝑖 。 
6.4.2.1 笔画长度相似度 𝑺𝒊𝒍 
意义：衡量输入书法字的笔画与数据库中书法字的笔画长度匹配程度（越长 /越短均会降低相似度）。  
变量定义：  
𝐿𝑜,𝑖：输入书法字第 i个笔画骨架的像素数，即 𝐿𝑜,𝑖=|𝐼𝑆𝑜𝑖| 
𝐿𝑐,𝑖：数据库中书法字第 i个笔画骨架的像素数，即 𝐿𝑐,𝑖=|𝐼𝑆𝑐𝑖| 
计算公式：  
𝑆𝑖𝑙=
{    1−𝐿𝑐,𝑖
𝐿𝑜,𝑖,若𝐿𝑜,𝑖<𝐿𝑐,𝑖（临帖笔画过长）
𝐿𝑐,𝑖
𝐿𝑜,𝑖,若𝐿𝑜,𝑖>𝐿𝑐,𝑖（临帖笔画过短） 
取值范围：  
𝑆𝑖𝑙∈(0,1]，当𝐿𝑜,𝑖=𝐿𝑐,𝑖时，𝑆𝑖𝑙=1（满分）  
6.4.2.2 笔画斜率相似度 𝑺𝒊𝒌 
意义：衡量笔画倾斜程度的匹配程度（斜率偏差会导致字形不稳定或呆板）。  
变量定义：  
每个笔画 𝐼𝑆i具有以下特征：  
     起点与终点坐标： 𝑝start=(𝛼1,𝛽1)，𝑝end=(𝛼2,𝛽2) 
     方向角： 𝜃𝑘=𝑎𝑟𝑐𝑡𝑎𝑛(𝛽2−𝛽1
𝛼2−𝛼1+𝜖) （加𝜖防止分母为 0） 
计算公式：    
𝑆𝑖𝑘=100∗(1−4
𝜋|𝜃c−𝜃o|) 
修正规则：  
若方向角差值 |𝜃c−𝜃o|>𝜋
4，则该段斜率相似度记为 0（视为严重偏差）  
6.4.2.3 笔画曲率相似度 𝑺𝒊𝒒 
物理意义：衡量笔画弯曲程度的匹配程度（过度弯曲或平直会影响美观）。  
变量定义：  
𝑄𝑜,𝑖：数据库中书法字字第 i个笔画的平均曲率（通过曲线拟合计算曲率半径的倒数）  
定义函数 CF(x)为x中所有点的曲线拟合的斜率。  
𝑄𝑐,𝑖：输入书法字第 i个笔画的平均曲率  
计算公式：  
𝑆𝑖,𝑞=
{    1−𝑄𝑐,𝑖
𝑄𝑜,𝑖,若𝑄𝑜,𝑖<𝑄𝑐,𝑖（输入书法字笔画过弯）
𝑄𝑐,𝑖
𝑄𝑜,𝑖,若𝑄𝑜,𝑖>𝑄𝑐,𝑖（输入书法字笔画过直） 
取值范围：   12 𝑆𝑖𝑞∈(0,1]，当𝑄𝑜,𝑖<𝑄𝑐,𝑖时，𝑆𝑖𝑞=1（满分）  
6.4.2.4 单笔画综合相似度 𝑺𝒊 
加权融合：根据不同笔画类型（如“横”无拐角，“撇”有曲率）动态调整权重：  
𝑆𝑖=0.3𝑆𝑖𝑙+0.4𝑆𝑖𝑘+0.3𝑆𝑖𝑞 
归一化处理：  
采用 Z-Score消除量纲影响（将 𝑆𝑖转化为标准正态分布后映射至 0~100分）：  
𝑆′𝑖=𝑆𝑖−𝜇𝑠
𝜎𝑠×10+50（𝜇𝑠为样本均值， 𝜎𝑠为样本标准差）  
6.4.2.5 整体笔画特征评分 𝑺𝒔𝒕𝒓𝒐𝒌𝒆  
目的：综合所有笔画的相似度，考虑不同笔画在汉字中的重要性（如主笔权重更高）。  
变量定义：  
ω𝑖：第 i个笔画的权重（按该笔画像素数占总骨架像素数的比例计算）：  
ω𝑖=输入书法字 第i个笔画骨架像素数
数据库中书法字 总骨架像素数 
计算公式：  
𝑆𝑠𝑡𝑟𝑜𝑘𝑒=∑𝜔𝑖𝑆′𝑖𝑁
𝑖=1 
 
6.4.3 结构相似度计算 𝑺𝒔𝒕𝒓𝒖𝒄𝒕  
通过 3个维度衡量汉字整体布局的合理性，综合为结构特征评分 𝑆𝑠𝑡𝑟𝑢𝑐𝑡  
6.4.3.1 宽高比相似度 𝑺𝒓 
意义：衡量汉字整体形态的协调性（过宽 /过高会破坏视觉平衡）。  
变量定义：  
𝑅𝑜=𝑊𝑜
𝐻𝑜∶ 数据库中书法字的宽高比（ 𝑊𝑜为宽度像素数， 𝐻𝑜为高度像素数）  
𝑅𝑐=𝑊𝑐
𝐻𝑐∶ 输入书法字的宽高比  
计算公式：  
𝑆𝑟{1−𝑅𝑐
𝑅𝑜，若𝑅𝑜<𝑅𝑐 (输入书法字字过宽 )
𝑅𝑐
𝑅𝑜，若𝑅𝑜>𝑅𝑐 (输入书法字字过高 ) 
归一化：  
将𝑆𝑟映射至 0~100分 
𝑆′𝑟=𝑆𝑟−𝜇𝑠
𝜎𝑠×10+50（𝜇𝑠为样本均值， 𝜎𝑠为样本标准差）  
6.4.3.2 重心位置相似度 𝑺𝒉 
意义：衡量汉字平衡点的匹配程度（重心偏移会导致“歪字”）。  
变量定义：  
数据库中书法字的重心（ 𝑥𝑜,𝑦𝑜）、输入书法字的重心（ 𝑥𝑐,𝑦𝑐）：  
𝒙𝒐=∑𝒙∙𝒇𝒐(𝒙,𝒚) 𝒙,𝒚
∑𝒇𝒐(𝒙,𝒚) 𝒙,𝒚，𝒚𝒐=∑𝒚∙𝒇𝒐(𝒙,𝒚) 𝒙,𝒚
∑𝒇𝒐(𝒙,𝒚) 𝒙,𝒚 
𝑓𝑜(𝑥,𝑦)为数据库中书法字的二值图像，前景像素为 1，背景为 0；𝑓𝑐(𝑥,𝑦)同理。  
计算公式：  
𝑺𝒉=𝟏−√(𝒙𝒄−𝒙𝒐)𝟐+(𝒚𝒄−𝒚𝒐)𝟐
𝐷𝑚𝑎𝑥 
欧氏距离，越小相似度越高。   13 归一化：  
将距离𝑆ℎ映射至 0~100分（距离为 0时得 100分，距离超过阈值 𝐷𝑚𝑎𝑥时得 0分。  
𝑆′ℎ=𝑆𝑖−𝜇𝑠
𝜎𝑠×10+50（𝜇𝑠为样本均值， 𝜎𝑠为样本标准差）  
6.4.3.3 笔画位置相似度 𝑺𝒑 
意义：衡量对应笔画间的相对位置匹配程度（位置偏差会破坏笔画间的衔接与平衡）。    
变量定义：  
(𝑥𝑜,𝑖,𝑦𝑜,𝑖)：数据库中书法字第 i个笔画的重心  
(𝑥𝑐,𝑖,𝑦𝑐,𝑖)：输入书法字第 i个笔画的重心  
𝐿𝑖：数据库中书法字第 i个笔画的长度（像素数）。    
计算公式：  
𝑆𝑝=1
𝑁∑√(𝑥𝑐,𝑖−𝑥𝑜,𝑖)2+(𝑦𝑐,𝑖−𝑦𝑜,𝑖)2
𝐿𝑖𝑁
𝑖=1 
除以𝐿𝑖是为了消除笔画长度对位置偏差的影响，越小相似度越高。  
归一化：  
将𝑆𝑝映射至 0~100分 
𝑆′𝑝=𝑆𝑝−𝜇𝑠
𝜎𝑠×10+50（𝜇𝑠为样本均值， 𝜎𝑠为样本标准差）  
6.4.3.4 整体结构特征评分 𝑺𝒔𝒕𝒓𝒖𝒄𝒕  
加权融合：  
𝑆𝑠𝑡𝑟𝑢𝑐𝑡=0.3𝑆′𝑟+0.4𝑆′ℎ+0.3𝑆′𝑝  
 
6.4.4 章法相似度计算 𝑮 
章法，是对于作品中字的观感的评价，鉴于观感受到整体作品的整齐度、分布疏密等因素影响，因此将“章
法”量化为文字大小的相对一致性与文字之间间隔的均匀性。  
6.4.4.1 验证文字大小的相对一致性  
考虑到不同文字在空间上所占面积有所不同，因此本文并不通过简单的文字长宽比进行比较，而是采用
作品字实际面积 𝑀𝐽(𝐶𝑆)与模版字实际面积 𝑀𝐽(𝐶𝑆𝑜)比例系数的离散程度（方差）来评价作品字的大小相对一
致性。  
求出作品字与样本字的实际面积  
    对于输入单字 𝐶𝑆𝑐与其相匹配单字 𝐶𝑆𝑜 
  𝑊(𝑃𝑖)为在骨架 𝑆𝑘上点𝑃𝑖位置笔画的宽度，即作品字的面积为：  
       𝑀𝐽(𝐶𝑆)=∑𝑊(𝑃𝑖),  𝑃𝑖∈𝑆𝑘 
模版字的面积为：  
𝑀𝐽(𝐶𝑆𝑜)=∑𝑊(𝑃𝑖),  𝑃𝑖∈𝑆𝑘𝑜 
面积比𝑢𝑖=𝑀𝐽(𝐶𝑆)
𝑀𝐽(𝐶𝑆𝑜) 
因此面积相似离散程度（方差）为 𝑈=∑(𝑢𝑖−∑𝑢𝑖
𝑁)2
𝑁 
其中𝑅为书法作品中书法字总个数。  
定义文字大小相对一致性系数：  
𝑺𝑼=𝟏−𝑼
𝑈𝑚𝑎𝑥 
归一化：  
将距离𝑆𝑈映射至 0~100分（距离为 0时得 100分，距离超过阈值 𝑈𝑚𝑎𝑥时得 0分。  
𝑆′𝑈=𝑆𝑖−𝜇𝑠
𝜎𝑠×10+50（𝜇𝑠为样本均值， 𝜎𝑠为样本标准差）   14 6.4.4.2 验证文字之间的间隔均匀性  
1.文字间隔，定义为两相邻文字之间骨架上的点在水平方向上的最小距离，即：  
𝐽𝐺𝑖=𝑚𝑖𝑛(|𝑥𝑃𝑖−𝑥𝑃𝑖+1|),𝑃𝑖,𝑃𝑖+1∈𝑆𝑘（同一行内）  
2.均匀性判断：对于全文的间隔，通过判断间隔的离散程度来评价间隔的一致性  
𝐽𝐺𝐽=∑(𝐽𝐺𝑖−∑𝐽𝐺𝑖
𝑁)2
𝑁 
其中𝑅为书法作品中书法字总个数。  
定义文字间隔均匀性系数：  
𝑺𝒋=𝟏−𝑱𝑮𝑱
𝐽𝐺𝐽𝑚𝑎𝑥 
归一化：  
将距离𝑆𝐽映射至 0~100分（距离为 0时得 100分，距离超过阈值 𝐽𝐺𝐽𝑚𝑎𝑥时得 0分。  
𝑆′𝐽=𝑆𝐽−𝜇𝑠
𝜎𝑠×10+50（𝜇𝑠为样本均值， 𝜎𝑠为样本标准差）  
6.4.4.3整体章法特征评分  
𝑆𝑝𝑎𝑠𝑠𝑎𝑔𝑒=0.45𝑆′𝑈+0.55𝑆′𝐽 
 
6.4.4 最终相似度得分  
融合笔画、结构与章法特征：  
𝑆𝑡𝑜𝑡𝑎𝑙=0.3𝑆𝑠𝑡𝑟𝑜𝑘𝑒+0.4𝑆𝑠𝑡𝑟𝑢𝑐𝑡+0.3𝑆𝑝𝑎𝑠𝑠𝑎𝑔𝑒  
 
6.5 硬笔书法艺术性评分模型   
本文鉴于书法作品艺术风格的多维度、难以量化的特点，开发了一种使用多个神经网络，以从多维度分析书法
作品的特点风格，并与其内容呈现的风格做比较，最终分析得到艺术性评分。  
 
6.5.1输入定义  
设输入空间为：  
𝐃=({𝐂𝐢}𝐢=𝟏𝐍,𝐟,𝐓),其中{     𝐂𝐢∈{𝟎,𝟏}𝐇×𝐖
𝐟∈ℝ𝐇′×𝐖′
  𝐓={𝐰𝐣}𝐣=𝟏𝐌 
意义：Ci为书法字单字二值图集， I为整体灰度图像， T为文本内容（从数据库的模版字上获取）  
6.5.2 特征提取  
6.5.2.1字体特征：    
𝐯𝐟𝐨𝐧𝐭=𝟏
𝐍∑𝐅𝛉(𝐂𝐢) 𝐍
𝐢=𝟏 
其中 𝐹𝜃=𝐺𝐴𝑃(𝐶𝑜𝑛𝑣3×3128∘𝑅𝑒𝐿𝑈∘𝑀𝑃2×2∘𝐶𝑜𝑛𝑣3×364∘𝑅𝑒𝐿𝑈∘𝑀𝑃2×2∘𝐶𝑜𝑛𝑣3×332(𝐶)) 
用来捕捉笔画特征（锐利 /圆润）、结构特征（紧凑 /舒展）、装饰特征（顿笔频率）  
6.5.2.2情感特征：    
𝜵𝒇(𝒙,𝒚)=(𝝑𝒇
𝝑𝒙,𝝑𝒇
𝝑𝒚) 
 15 𝒈(𝒙,𝒚)=‖𝜵𝒇(𝒙,𝒚)‖𝟐 
𝒈̃(𝒙,𝒚)=𝒈(𝒙,𝒚)−𝝁𝒈
𝝈𝒈+𝝐 
{𝐡𝐭}𝒕=𝟏𝑻=𝑳𝑺𝑻𝑴({𝒈̃(𝒙,𝒚)}𝒕=𝟏𝑻) 
𝒗𝒆𝒎𝒐𝒕𝒊𝒐𝒏=𝟏
𝑻∑𝐡𝐭𝑻
𝒕=𝟏 
用来提取动态特征（笔画速度感）、力度特征（墨色深浅变化）、节奏特征（字间距变化）  
6.5.2.3文风特征：    
𝒉𝒋=𝑩𝑬𝑹𝑻(𝑾𝒋) 
𝜶𝒋=𝒔𝒐𝒇𝒕𝒎𝒂𝒙 (𝒒𝑻𝒕𝒂𝒏𝒉(𝑾𝒂𝒉𝒋) 
𝒗𝒍𝒊𝒕𝒆𝒓𝒂𝒓𝒚=∑𝜶𝒋𝒉𝒋𝑴
𝒋=𝟏 
其中𝑊𝑗∈𝑇,ℎ𝑗为BERT词向量， 𝛼𝑗量化词汇风格贡献度  
用来分析句式复杂度、情感词密度、时代特征（文言 /白话）  
 
6.5.3风格标签生成  
定义书法作品特征向量：  
𝒗𝒔𝒕𝒚𝒍𝒆=[𝒗𝒇𝒐𝒏𝒕;𝒗𝒆𝒎𝒐𝒕𝒊𝒐𝒏;𝒗𝒍𝒊𝒕𝒆𝒓𝒂𝒓𝒚] 
定义风格标签：  
𝐭=𝛔（𝐖𝐬∙𝐋𝐚𝐲𝐞𝐫𝐍𝐨𝐫𝐦 (𝒗𝒔𝒕𝒚𝒍𝒆)+𝐛𝐬） 
特性：    
  每个标签 t∈[0,1]L  (L=192)表示该风格的强度  
 
6.5.4跨模态风格对齐  
定义视觉 -文本联合空间投影：  
𝐀𝐥=𝐜𝐨𝐬(𝐯𝐯𝐢𝐬𝐮𝐚𝐥,𝐯𝐭𝐞𝐱𝐭)=〈𝛟𝐯(𝐯𝐯𝐢𝐬𝐮𝐚𝐥),𝛟𝐭(𝐯𝐭𝐞𝐱𝐭)〉
‖𝛟𝐯(𝐯𝐯𝐢𝐬𝐮𝐚𝐥)‖∙‖𝛟𝐭(𝐯𝐭𝐞𝐱𝐭)‖ 
其中：ϕv(x)=ReLU(Wvx+bv)   (Wv∈ℝ256×192)   
 ϕt(y)=ReLU(Wty+bt)    (Wt∈ℝ256×192) 
其中：  
视觉风格向量：    
𝒗𝒗𝒊𝒔𝒖𝒂𝒍=[𝒗𝒇𝒐𝒏𝒕;𝒗𝒆𝒎𝒐𝒕𝒊𝒐𝒏] 
文本风格向量：    
𝒗𝒕𝒆𝒙𝒕=𝒗𝒍𝒊𝒕𝒆𝒓𝒂𝒓𝒚  
 
6.5.5艺术性综合评分  
定义艺术性综合评分：  
A=40(Al+1
2)+30Coherence +30Distinctness  
其中：  
Coherence 单字间风格一致性：  
𝐂𝐨𝐡𝐞𝐫𝐞𝐧𝐜𝐞 =𝐞𝐱𝐩(−𝟏
𝐍∑‖𝐯𝐟𝐨𝐧𝐭(𝐢)−𝐯̅𝐟𝐨𝐧𝐭‖
𝟐𝟐𝐍
𝐢=𝟏) 
Distinctness 整体风格鲜明度：   16 𝐃𝐢𝐬𝐭𝐢𝐧𝐜𝐭𝐧𝐞𝐬𝐬 =‖𝐭‖𝟐
√𝐋 
输出：A∈[0,100] 
 
6.5.6 损失函数  
𝓛′=𝟏
|𝐒|∑[𝐲𝐤𝐥𝐨𝐠𝐭𝐤+(𝟏−
𝐤∈𝐒𝐲𝐤)𝐥𝐨𝐠(𝟏−𝐭𝐤)]+𝛌(𝟏−𝐀)+𝛍‖𝐭‖𝟏 
其中 :标注损失为  1
|ℒa|∑[yklogtk+(1− k∈ℒayk)log(1−tk)],S为有标注的标签索引集  
      对齐损失为  λ(1−Al),λ(ε)=0.5(1+cos(πe
Emax))   
      稀疏约束为  μ‖t‖1 
此为机械学习目标  
 
6.6 硬笔书法综合评价体系  
前文已经分析了硬笔书法好坏的两个重要指标， 即规范性与艺术性。 然后需要指出的是， 此两者并非相互孤立，
有独特艺术风格、创作意图的书法字往往不那么“规范”。鉴于此，本文对于书法作品的综合评价基于简单的
阈值二分类，对于艺术性低的作品令其规范性权重大，而对于艺术性高的作品则允许其不那么“规范”，增大
其艺术性权重。  
定义综合评价评分：  
Score={0.7∗𝑆𝑡𝑜𝑡𝑎𝑙+0.3∗𝐴  𝑖𝑓 𝐴≤0.6
0.5∗𝑆𝑡𝑜𝑡𝑎𝑙+0.5∗𝐴  𝑖𝑓 𝐴>0.6 
就此获得最终评分  
 
模型的应用方法  
一、模型训练  
1. 单字识别模型（ CIR-SNN） 
训练数据：  
标注  "同类 /异类 " 标签的书法字对    
 
2.艺术性评分模型  
训练数据：    
带风格标签（如  "刚劲 "、"飘逸 "）的书法作品    
图文对齐数据（相同风格的书法作品与文字描述）    
 
二、数据库要求  
1. 基础数据库  
单字库  
高分辨率灰度整作品图与二值化整作品图像  
高分辨率灰度单字图与二值化单字图像     
包含楷书 /行书 /隶书等主要书体的分类    
 
完整作品库   
硬笔书法灰度扫描件    
标注文本内容     
  17 2. 训练专用库  
单字识别训练集：  
正样本：同一字的不同书写样本   
负样本：不同字的书写样本   
笔画标注集：  
人工标注的独立笔画图层   
骨架点与笔画归属关系标注    
艺术性训练集：  
作品风格标签（文本风格，书法作品风格）  
  
三、应用流程  
1. 输入处理：    
书法作品图像  → RGB转灰度  → 二值化→  中值滤波去噪  → 骨架提取（距离变换 +局部最大值法）→  去毛
刺   
2. 单字分割：    
骨架拆分为笔画段  → 计算重心  → KMeans 聚类  → 归一化单字图像  
3. 单字识别：  
孪生神经网络（ CIR-SNN）计算候选集  → CI-FRA 二次排序→  输出匹配模板字  
4. 规范性评分：  
笔画评分：分割笔画  → 计算长度 /斜率 /曲率相似度  → 加权得   
结构评分：计算宽高比 /重心 /笔画位置相似度  → 加权得   
章法评分：计算大小一致性 + 间隔均匀性→  加权得   
融合得到规范性综合评分  
5. 艺术性评分：    
提取字体特征、情感特征、文风特征→  生成风格向量→  计算单字间风格一致性、整体风格鲜明度→  输出 A 
6. 综合评分    
对模型可能出现的结果的应对方案  
问题一： 二值图识别出错（背景大面积辨认成前景）  
解决方案： 多是因为阴影，可以：  
1. 规定输入作品拍摄条件，避免阴影。  
2. 引入局部自适应阈值法进行图像二值化。  
 
问题二： 艺术性评分偏差问题（随意涂鸦辨认成风格鲜明）  
解决方案： 可以：  
1. 往训练集中增加传统书法  
2. 调整综合评价中规范性与艺术性的系数和艺术性阈值  
 
问题二： 实时性瓶颈  
解决方案： 难以简单解决，可以：  
1. 用轻量神经模型代替原来神经模型  
2. 关键路径计算 GPU加速  
  18 模型优缺点  
模型优点  
1. 技术全面：覆盖预处理至艺术性评分的全流程，创新融合图像与文本多模态分析。    
2. 量化严谨：规范性评分细化至笔画级（长度 /斜率 /曲率），结构分析三重验证（重心 /位置 /宽高比）。    
3. 灵活适配：通过艺术性阈值动态调整规范与创新权重，支持分书体扩展。    
 
模型缺点  
1. 计算负荷高：串联骨架提取、动态笔画分割和孪生 ResNet50+BERT 推理。    
2. 标注依赖强：需大量人工标注笔画图层、风格标签及图文对齐数据。    
3. 主观残留：艺术性评分中一致性与鲜明度的权重依赖专家设定，未建模特殊技法（如飞白）。  
 
 
 
 
参考文献  
[1]孙家豪 .一种书法汉字智能评价方法的研究与实现 [D].湖北工业大学 ,2020.DOI:10.27131/d.cnki.ghugc.2020.001178.  
[2]杨 盛 凯 .基 于 汉 字 骨 架 的 硬 笔 书 法 字 笔 画 提 取 与 评 判 算 法 研 究 [D].南 京 信 息 工 程 大
学,2023.DOI:10.27248/d.cnki.gnjqc.2023.001557.  
[3]徐益鸣 .硬笔临帖书法字图像检索与智能评价算法研究 [D].南京信息工程大
学,2023.DOI:10.27248/d.cnki.gnjqc.2023.001326.  
[4]熊 宁 阳 .硬 笔 书 法 作 品 的 章 法 布 局 智 能 评 价 方 法 研 究 [D].南 京 信 息 工 程 大
学,2024.DOI:10.27248/d.cnki.gnjqc.2024.000816.  
 
附录  
我们利用了人工智能辅助你们的建模， 选用的是 DeepSeek ，以下是我 们的提示词 、AI反馈的结果是什么 以及我们的
理解、思考、判断、取舍是什么。 由于 AI反馈内容较长，此处仅截取我们认为有帮助的部分进行展示。  
 
提示词 1： 
我现在想要建立一个数学模型，用来评判硬笔书法比赛作品的艺术性  
我们现在已经完成了图像预处理，单字分割，书法字单字识别，规范性评分我希望艺术性的评判基于孪生神经网络  
可以将输入的书法字从单字和整体两方面分类到某一风格同时可以评判该风格适不适合其所写文章的风格  
现在的技术难点在于如何分辨“风格”，如何确定其所写文章是何“风格”请你给出解决方案  
AI反馈 1：  19  
DeepSeek 在了解我们目前的进展和技术难点后，给出了解决方案：对书法图像采用单字风格分类模块与整体章法
风格分类模块，而对文章文本采用文章风格分类模块，此后借助风格适配度评分模块，从而最终得出艺术性综合评
分。明确了我们的艺术性评判数学模型的总体，切实。  
 
提示词 2： 
可不可以将其 1.5的数学模型详细化、并作完善修补，然后给我一个完整的数学模型  
AI反馈 2：
 
DeepSeek 给出了多模态特征提取中字体特征向量、情感特征向量及其相应的函数。我们要求它给出阐释，确定可
 20 行之后加入到数学模型中，以期实现艺术性评价 。 
 
提示词 3： 
我现在正在建立一个数学模型请你扮演一位数学模型专家  
对我论文 1.5 即艺术性评分的部分做出点评和修正  
AI反馈 3： 
 
DeepSeek 给出了艺术性评分公式存在缺陷，其指出原始公式中的 𝐶𝑜𝑛ℎ𝑒𝑟𝑒𝑛𝑐𝑒会导致数值爆炸，且各项权重缺乏数
据支持，而我们也据此进行了相应的调整 。 
 
提示词 4： 
请检查论文有没有格式问题 (变量未声明、变量复用等 )并对模型可能出现的结果提出应对方案  
AI反馈 4： 
 
DeepSeek 给出了未声明变量、变量符号冲突、符号不一致的问题，我们也根据  DeepSeek 给出的信息，修正了原
有的错误 。 
